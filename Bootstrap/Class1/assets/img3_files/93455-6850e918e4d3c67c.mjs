"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[93455],{13882:(e,t,i)=>{i.d(t,{Z:()=>o});function o(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}},983946:(e,t,i)=>{i.d(t,{Z:()=>o});function o(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}},619013:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(13882);function r(e){(0,o.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))}},481238:(e,t,i)=>{i.d(t,{Z:()=>o});function o(e){return e?"/pin-creation-tool/":"/idea-pin-builder/"}},453424:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(297728),r=i(410150),l=i(383399),n=i(501912),a=i(801621);function s(e){let t=(0,r.HG)(),{checkExperiment:i}=(0,o.F)(),s=(0,n.Z)(),d=(0,l.Z)(),c=(0,a.lJ)(d,s),u=!t||i("web_sce_organic_pinbuilder_dep").anyEnabled,_=i("uid_sce_lightswitch_advertisers").anyEnabled;return!c&&(e&&i("sce_lightswitch_organic"),!t||!!(u||_))}},919659:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(640498);function r(e){return e===o.ZP.BoardPrivacy.SECRET}},357013:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(590338),r=i(730212),l=i(785893);let n=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:n,shortformMaximumFractionDigits:a,formatStyle:s,uplimit:d,value:c})=>{let u=(0,o.Z)();return(0,l.jsx)(r.LC,{children:o=>u(o.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:n,shortform_maximum_fraction_digits:a,style:s,uplimit:d})})}},766546:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(667294);function r(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends o.Component{constructor(...e){super(...e),r(this,"ref",(0,o.createRef)()),r(this,"observer",null),r(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let n=l},931397:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(809833),r=i(174044);function l(e){let{enabledRouteRefresh:t,headers:i,name:l,noCache:n,options:a,schema:s}=e??{name:o.fY,options:null},d=!e,{fetchResource:c,ref:u}=(0,r.Z)({enabledRouteRefresh:t,headers:i,name:l,noCache:n,options:a,schema:s},d,!1);return d||c(),u}},715824:(e,t,i)=>{i.d(t,{ZP:()=>r,mP:()=>o});let o="â€¦";function r(e,t=80,i=o,l=!1){let n;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||l)n=e.substring(0,t);else{let i=e.lastIndexOf(" ",t);n=e.substring(0,i)}return(n=n.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+i}},62370:(e,t,i)=>{i.d(t,{r:()=>g,K:()=>P});var o=i(667294),r=i(498490),l=i(961754),n=i(383399),a=i(942905),s=i(978993),d=i(296209);let c=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,d.Z)(i)]=e[i]:t[(0,d.Z)(i)]=c(e[i]));return t},u=(e,t)=>{let i=[];for(let o in e)o!==t&&i.push({id:o,...c(e[o])});let o=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),r=new Map;for(let e of o)r.set(e.id,e);return r},_={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},p=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:r,disableProfileChanger:l,headerVisible:n}=i,a=(0,o.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]);return{changeProfile:a,toggleORBACVisibility:(0,o.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!r})},[t,e,r]),toggleDisableProfileChanger:(0,o.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!l})},[t,e,l]),toggleHeaderVisibility:(0,o.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!n})},[t,e,n])}},m=e=>{let[t,i]=(0,o.useReducer)(h,_),r=p({dispatch:i,isEnabled:e,state:t}),{activeProfile:l,orbacVisibility:n}=t;return(0,o.useEffect)(()=>{let e=(0,s.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,o.useEffect)(()=>{let e=(0,s.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,o.useEffect)(()=>{(0,s.Nh)("orbacVisibility",n)},[n]),(0,o.useEffect)(()=>{(0,s.Nh)("orbacActiveProfile",l)},[l]),{state:t,actions:r,receiveProfiles:(0,o.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:u(e,t)})},[i])}};var b=i(785893);let{Provider:f,useMaybeHook:P}=(0,r.Z)("RoleBasedAccessControlContext"),g=({children:e})=>{let t;let i=(0,n.Z)(),r=!!(i.isAuth&&i.isPartner),{state:s,actions:d,receiveProfiles:c}=m(r),{activeProfile:u,headerVisible:_,profiles:h=[]}=s,p=h?Array.from(h.values()):[],P=(0,a.Z)(p),g=!!i.isAuth&&p.length>0&&P,x=i.isAuth?i.id:"",A=i.isAuth?i.username:"",{changeProfile:y,toggleORBACVisibility:v,toggleDisableProfileChanger:w,toggleHeaderVisibility:C}=d;(0,o.useEffect)(()=>{if(r){if("string"==typeof P){y(P);return}u||y(x)}},[P,x,r,y,u]),(0,o.useEffect)(()=>{r&&(g&&!_&&C(!0),!g&&_&&C(!1))},[C,g,r,_,h]);let{data:j}=(0,l.Z)(r?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),L=j?.profiles;i&&i.isAuth&&s.activeProfile===i.id?t={id:i.id,permissions:["OWNER"],user:{username:A,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:u&&s.profiles&&(t=s.profiles.get(u)),(0,o.useEffect)(()=>{L&&c(L,x)},[c,L,x]);let z=s.profiles?Array.from(s.profiles.values()):[];return(0,b.jsx)(f,{value:{profiles:z,headerVisible:s.headerVisible,activeProfile:t,changeProfile:y,toggleORBACVisibility:v,toggleDisableProfileChanger:w,toggleHeaderVisibility:C},children:e})}},501912:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(297728),r=i(62370),l=i(942905);let n=()=>{let{checkExperiment:e}=(0,o.F)(),t=(0,r.K)(),{activeProfile:i}=t||{},n=(0,l.Z)(t?.profiles||[]),{anyEnabled:a}=e("useorbacroutematcher_in_useorbacactingas");return a&&!n?Object.freeze({}):i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},942905:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(616550),r=i(282999),l=i(383399),n=i(66560);let a=e=>{let t=(0,o.TH)(),i=(0,l.Z)(),a=(0,n.S6)(),s=(0,o.$B)("/:username"),d=s?.params?.username,c=(0,o.$B)("/pin/:id"),u=!!c?.params?.id&&a(c.params.id)?.pinner?.id;if((0,r.ej)(t))return!1;if((0,r.RU)(t)||(0,r.mY)(t))return!0;let _=e.concat(i.isAuth?{user:{username:i.username},id:i.id}:{}).find(e=>{let{user:t={},id:i}=e||{},{username:o}=t;return(!!o&&!!d||!!u&&!!i)&&(o===d||u===i)});return!!_&&_.id}},801621:(e,t,i)=>{i.d(t,{D3:()=>u,DX:()=>d,Fk:()=>o,KY:()=>_,Ms:()=>r,N1:()=>h,_P:()=>s,gJ:()=>l,lJ:()=>a,nl:()=>n,q6:()=>c});let o=(e,t)=>{let i=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(i=t.user.businessName),i},r=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},l=(e,t)=>{let i=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(i=t.user.imgUrl),i},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",s=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,d=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),u=(e,t,i)=>!!(c(e,t,i)||e&&e.isAuth&&t===e.id),_=(e,t,i)=>u(e,t&&t.owner&&t.owner.id||"",i);function h(e,t,i){return u(e,t?t.id:"",i)}},820495:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(667294),r=i(883119),l=i(282817),n=i(785893);let a={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"};function s({children:e,forwardRef:t,position:i="static",shouldShowShadow:s=!1,top:d,style:c={}}){let{currentScrollPosition:u,isScrolled:_,setSubheaderShadow:h}=(0,l.W)();(0,o.useEffect)(()=>(s&&h("contentHeader"),()=>{s&&h(null)}),[s]);let p=!1;"pending"!==d&&(p=null!=d?u>=d:_);let m=(0,n.jsx)(r.xu,{ref:t,dangerouslySetInlineStyle:{__style:{position:i,...c,...p&&s&&{...a,zIndex:499}}},children:e});return"sticky"===i?(0,n.jsx)(r.Le,{top:0,children:m}):m}},452406:(e,t,i)=>{i.d(t,{Z:()=>L});var o=i(667294),r=i(545007),l=i(616550),n=i(883119),a=i(488792),s=i(989820),d=i(758339),c=i(144326),u=i(297728),_=i(410150),h=i(26456),p=i(451237),m=i(785893);function b({isOpen:e,onDismiss:t}){let i=(0,c.ZP)();return(0,m.jsx)(d.ZP,{accessibilityModalLabel:i._('Disabled Pin Publishing Error Message Modal', 'disabledPinCreationModal.modal.accessibilityLabel', 'Label for disabled pin creation modal'),isOpen:e,mobileAccessibilityCloseIconLabel:i._('Close disabled publishing message modal', 'disabledPinCreationModal.modal.closeIconLabel', 'Label for the close button on the disabled publishing modal'),onDismiss:t,type:"DisabledPublishingModal",children:(0,m.jsxs)(n.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[(0,m.jsx)(n.X6,{children:i._('Oops...', 'disabledPinCreationModal.modal.heading', 'Exclamation used to show recognition of a mistake.')}),(0,m.jsx)(n.xu,{paddingY:3,children:(0,m.jsx)(n.xv,{children:i._('Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.', 'disabledPinCreationModal.modal.text', 'Message to let users know there is an error.')})}),(0,m.jsx)(n.xu,{paddingY:3,children:(0,m.jsx)(n.zx,{color:"red",onClick:()=>t(),size:"lg",text:i._('Dismiss', 'disabledPinCreationModal.button.dismiss', 'Button text for closing the disabled pin creation modal')})})]})})}function f(e){let t=(0,c.ZP)(),{viewType:i,boardId:o,handleTouch:r}=e,l=t._('Board', 'createMenuLinkButton.Create.Board.Label', 'label for creating a new board option'),a=t._('Section', 'createMenuLinkButton.Create.Section.Label', 'label for creating a new section option');return 5===i&&o?(0,m.jsx)(n.Tg,{href:`/board/${o}/create_section/`,onTap:r,rounding:2,children:(0,m.jsx)(n.xu,{"data-test-id":"addSectionButton",paddingY:2,children:(0,m.jsx)(n.X6,{size:"400",children:a})})}):(0,m.jsx)(n.Tg,{href:"/board/create/",onTap:r,children:(0,m.jsx)(n.xu,{"data-test-id":"createMenuCreateBoardButton",paddingY:2,children:(0,m.jsx)(n.X6,{size:"400",children:l})})})}var P=i(246826);function g({disabledPinCreation:e,handleDisablePublish:t,handleTouch:i}){let o=(0,c.ZP)(),r=(0,l.k6)(),a=e=>({imageBase64:e,description:"",imageUrl:"",method:P.Iv}),s=o._('Photo', 'createPinButton.Photo.Upload.Label', 'label to upload pin from camera roll photos');return(0,m.jsx)(n.iP,{onTap:()=>{if(e){t();return}i()},tapStyle:"none",children:(0,m.jsxs)(n.xu,{paddingY:2,position:"relative",children:[(0,m.jsx)(n.X6,{size:"400",children:s}),e?null:(0,m.jsx)("input",{accept:"image/*",id:"upload-pin",onChange:e=>{let t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{let e=t.result;r.push({pathname:`/pin/create/${P.Iv}/`,state:a(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"},type:"file"})]})})}var x=i(947506),A=i(934648),y=i(799239);function v(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let w=new n.Ry(1),C=e=>{let t=window&&window.innerWidth||0,i=e._('Enter a link to create a Pin, https://...', 'placeholder in text field where a user inputs a URL to create a Pin', 'placeholder in text field where a user inputs a URL to create a Pin'),o=e._('Enter a link, https://...', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit');return t<380?o:i};class j extends o.PureComponent{constructor(...e){super(...e),v(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),v(this,"createPinFromLinkInput",(0,o.createRef)()),v(this,"createMenuPlusIconButtonRef",(0,o.createRef)()),v(this,"closeCreateModal",()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})}),v(this,"clearValidationError",()=>{this.setState({urlValidationError:null})}),v(this,"openCreateModal",()=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,x.is)(this.props.i18n)})()}),v(this,"handleCreatePinFromLinkTouch",()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})}),v(this,"handleDisablePublish",()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})}),v(this,"handleLinkFieldChange",({value:e})=>{this.setState({createPinFromLinkUrl:e})}),v(this,"handlePinFromLinkFormSubmit",(e,t)=>{let{createPinFromLinkUrl:i}=this.state,{experimentsClient:o}=this.props;e.preventDefault();let{errors:r}=(0,h.Jx)({message:this.props.i18n._('Oops! Please enter a valid URL.', 'URL validation error message on Pin builder form', 'URL validation error message on Pin builder form'),experimentsClient:o})(i),[l]=r;l?this.setState({urlValidationError:l}):this.handleUrlValidationSuccess(t)}),v(this,"handleTouch",()=>{let{logContextEvent:e,viewType:t,elementType:i}=this.props;e({view_type:t,view_parameter:3106,element:i,event_type:102,aux_data:{source:p.Z.PROFILE}})}),v(this,"handleUrlValidationSuccess",e=>{this.setState({showInlineTextEditCreatePin:!1});let{createPinFromLinkUrl:t}=this.state;this.props.updatePinBuilderInput({submittedLink:t}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:t}}),this.closeCreateModal()}),v(this,"renderCreatePinFromLinkOption",()=>{let{disabledPinCreation:e,history:t}=this.props,{createPinFromLinkUrl:i,showInlineTextEditCreatePin:o}=this.state,r=this.props.i18n._('Website', 'editPin.CreatePinFromUrl.Label', 'label for option to create a pin from a url');return(0,m.jsx)(n.kC,{alignItems:"center",height:46,justifyContent:"start",children:o?(0,m.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,t),style:{width:"100%"},children:(0,m.jsxs)(n.xu,{display:"flex",justifyContent:"between",position:"relative",zIndex:w,children:[(0,m.jsxs)(n.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),(0,m.jsx)(n.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:C(this.props.i18n),size:"lg",value:i})]}),(0,m.jsx)(n.hU,{accessibilityLabel:this.props.i18n._('Create Pin from entered link', 'navigation button to confirm user will create a Pin from a link they entered', 'navigation button to confirm user will create a Pin from a link they entered'),icon:"arrow-forward",iconColor:"darkGray",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,t),size:"lg"})]})}):(0,m.jsx)(n.iP,{onTap:()=>{if(e){this.handleDisablePublish();return}this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:(0,m.jsx)(n.xu,{"data-test-id":"websiteButton",position:"relative",children:(0,m.jsx)(n.X6,{size:"400",children:r})})})})}),v(this,"renderErrorFlyout",()=>{let{urlValidationError:e}=this.state;return e&&(0,m.jsx)(n.J2,{anchor:this.createPinFromLinkInput.current,idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:(0,m.jsx)(n.xu,{padding:3,width:"100%",children:(0,m.jsxs)(n.kC,{gap:2,children:[(0,m.jsx)(n.qb,{type:"problem"}),(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:e})]})})})})}componentDidMount(){let{isInputOpen:e,submittedLink:t}=this.props;(e||t)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:t||""})}render(){let{bgColor:e,boardId:t,buttonPadding:i,disabledPinCreation:r,i18n:l,isDesktop:a,iconButtonColor:c="gray",iconButtonSize:u="xl",viewType:_}=this.props,{showCreateModal:h,showPublishingDisabledError:p}=this.state,P=this.props.i18n._('Add a Pin or board', 'heading in profile create modal', 'heading in profile create modal');164===_?P=this.props.i18n._('Add to section', 'heading in section create modal', 'heading in section create modal'):5===_&&(P=this.props.i18n._('Add a Pin or section', 'heading in profile create modal', 'heading in profile create modal')||l._('Add to board', 'heading in board create modal', 'heading in board create modal'));let x=4===_?this.props.i18n._('Add to profile', 'editPin.AddToProfile.Modal.Header', 'heading in profile create modal'):P,A=(5===_||164===_)&&this.createMenuPlusIconButtonRef.current;return(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,m.jsx)(n.xu,{"data-test-id":"createMenuCreateButton",children:(0,m.jsx)(n.hU,{ref:this.createMenuPlusIconButtonRef,accessibilityLabel:this.props.i18n._('Create a Pin or board', 'icon that opens model prompting user to create a new pin or board', 'icon that opens model prompting user to create a new pin or board'),bgColor:e,icon:"add",iconColor:c,onClick:this.openCreateModal,padding:"auto"!==i?i:1,size:u})})}),h&&(0,m.jsx)(d.ZP,{accessibilityModalLabel:"",heading:x,isOpen:this.state.showCreateModal,mobileAccessibilityCloseIconLabel:this.props.i18n._('close board and pin create modal', 'close modal that prompts user to create a new pin or board', 'close modal that prompts user to create a new pin or board'),onDismiss:this.closeCreateModal,type:"create_menu",children:(0,m.jsx)(n.xu,{padding:3,children:(0,m.jsxs)(n.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(n.xu,{paddingX:2,children:[(0,m.jsx)(n.xv,{children:this.props.i18n._('Create', 'editPin.Create.Section.Text', 'Section title to Create new things on Edit Pin add modal')}),(0,m.jsx)(o.Fragment,{children:this.renderCreatePinFromLinkOption()}),(0,m.jsx)(g,{disabledPinCreation:r,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==_&&(0,m.jsxs)(n.xu,{marginTop:6,paddingX:2,children:[(0,m.jsx)(n.xv,{children:this.props.i18n._('Add', 'editPin.Section.Add.Text', 'Section Add title on Edit Pin add modal')}),(0,m.jsx)(f,{boardId:t,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:_})]})]}),(0,m.jsx)(n.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:(0,m.jsx)(n.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n._('Close', 'editPin.Modal.Close.Button', 'Button text to close modal on EditPin')})})]})})}),p&&(0,m.jsx)(b,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}}),A&&(0,m.jsx)(s.N,{anchors:{[a?3006:4006]:this.createMenuPlusIconButtonRef.current},idealDirection:"up",onAnchorTouch:"complete",placementId:a?18:1000251,scrollToDismiss:!0})]})}}function L(e){let t=(0,c.ZP)(),i=(0,_.HG)(),o=(0,u.F)(),{checkExperiment:n}=o,s=["disable_all","disable_web_pins"].includes(n("disable_pin_creation").group),d=(0,r.I0)(),h=(0,l.k6)(),{pinBuilder:p}=(0,r.v9)(e=>e.session),b=(0,a.Z)(),f=p&&p.isInputOpen,P=p&&p.submittedLink,g=(0,A.Z)();return(0,m.jsx)(j,{...e,disabledPinCreation:s,experimentsClient:o,history:h,i18n:t,isDesktop:i,isInputOpen:f,logContextEvent:b,requireAuthForLimitedLogin:g,submittedLink:P,updatePinBuilderInput:e=>d((0,y.p)(e))})}},282817:(e,t,i)=>{i.d(t,{H:()=>d,W:()=>s});var o=i(667294),r=i(498490),l=i(235838),n=i(785893);let{Provider:a,useHook:s}=(0,r.Z)("HeaderShadow");function d({children:e}){let[t,i]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[d,c]=(0,o.useState)(0),[u,_]=(0,o.useState)(null),h=(0,l.Z)(()=>{t&&(s(window.scrollY>0),c(window.scrollY))},50);return(0,o.useEffect)(()=>(i(!0),()=>{i(!1)}),[]),(0,o.useEffect)(()=>(window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}),[t]),(0,n.jsx)(a,{value:{currentScrollPosition:d,isScrolled:r,setSubheaderShadow:_,subheaderShadow:u},children:e})}},49985:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(667294),r=i(488792),l=i(1006);let n=e=>Object.keys(e).reduce((t,i)=>(void 0===e[i]&&delete t[i],t),{...e}),a=({viewType:e,viewParameter:t,viewData:i,auxData:o,objectIdStr:r,component:a,clientTrackingParams:s,element:d},c)=>{let u=n({event_type:13,view_type:e,view_parameter:t,view_data:i,aux_data:o,object_id_str:r,component:a,clientTrackingParams:s,element:d});-1===Object.keys(u).indexOf("view_type")&&(0,l.My)("mweb.logging.null_view_type"),c(u)};function s(e){let{auxData:t,clientTrackingParams:i,children:l,component:n,element:s,objectIdStr:d,viewData:c,viewParameter:u,viewType:_}=e,h=(0,r.Z)(),p=JSON.stringify(t),m=JSON.stringify(c);return(0,o.useEffect)(()=>{a(e,h)},[h,p,i,n,s,d,m,u,_]),o.Children.only(l)}},265899:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(883119),r=i(785893);function l(e){let{accessibilityLabel:t,bgColor:i,icon:l,iconColor:n,onClick:a,selected:s,size:d,tooltip:c}=e;return(0,r.jsx)(o.hU,{accessibilityLabel:t,bgColor:i??"transparent",icon:l,iconColor:n??"darkGray",onClick:a,selected:s,size:d??"lg",tooltip:c?{text:c}:void 0})}},797242:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(667294),r=i(883119),l=i(265899),n=i(785893);function a({bgColor:e,children:t,label:i,icon:a,iconColor:s,id:d,size:c,tooltip:u}){let _=(0,o.useRef)(null),[h,p]=(0,o.useState)(!1),m=()=>p(!1);return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(r.xu,{ref:_,"data-test-id":d,children:(0,n.jsx)(l.Z,{accessibilityLabel:i,bgColor:e,icon:a,iconColor:s,onClick:()=>p(!h),selected:h,size:c,tooltip:u})}),h&&(0,n.jsx)(r.Lt,{anchor:_.current,disableMobileUI:!0,id:"actionBarMenuButton",idealDirection:"down",onDismiss:m,zIndex:new r.Ry(1e3),children:t({handleClose:m})})]})}},246826:(e,t,i)=>{i.d(t,{Iv:()=>o,dU:()=>_,it:()=>n,jI:()=>u,n0:()=>s,nY:()=>l,sW:()=>c,up:()=>r});let o="uploaded",r="pinbuilder",l="scraped",n="button";function a(e){return!!e&&"object"==typeof e&&"method"in e}function s(e){return a(e)&&e.method===l}function d(e){return a(e)&&e.method===o}function c(e){return a(e)&&e.method===n}function u(e){return s(e)||d(e)||c(e)}function _({boardId:e,checkExperiment:t,createPin:i,sectionId:o,state:r}){let l=[];if(s(r)){let{imgData:n}=r;n.forEach(n=>{l.push(i(function({boardId:e,checkExperiment:t,image:i,sectionId:o,state:r}){let{description:l,link:n,method:a}=r;return{boardId:e,checkExperiment:t,description:l,guid:"",imageBase64:"",imageUrl:i,link:n,method:a,sectionId:o}}({boardId:e,checkExperiment:t,image:n,sectionId:o,state:r})))})}else l.push(i(function({boardId:e,checkExperiment:t,sectionId:i,state:o}){if(d(o)){let{description:r,imageBase64:l,imageUrl:n,method:a}=o;return{boardId:e,checkExperiment:t,description:r,guid:"",imageBase64:l,imageUrl:n,link:"",method:a,sectionId:i}}{let{description:r,guid:l,imageUrl:n,link:a,method:s}=o;return{boardId:e,checkExperiment:t,description:r,guid:l,imageUrl:n,link:a,method:s,sectionId:i}}}({boardId:e,checkExperiment:t,sectionId:o,state:r})));return l}},217649:(e,t,i)=>{i.d(t,{CC:()=>c,H$:()=>_,Mt:()=>s,dp:()=>u,p9:()=>h});var o=i(609326),r=i(192820),l=i(640498),n=i(864723),a=i(166408);let s=({key:e,lastVisitedPage:t,imageSignature:i,pinId:o,imageInfo:r,pinDescription:a,pinInviteCode:s})=>{let d=(0,n.M0)().getItem(e)??[];if(!d[0]||d[0].path!==t){let d=[{path:t,ts:Date.now(),pin_id:o||0,first_pin_image_signature:i||"",first_pin_id:o||"",image_info:r||"",pin_description:a||"",is_shared:!!s,pin_invite_code:s}];(0,n.M0)().prependItem(e,d,l.LG)}},d=()=>{let e;let t=(0,a.Nl)().getItem(r.N_);if(!t)return[];try{e=JSON.parse(t)}catch(t){e=[]}return e},c=({path:e,image:t,dominant_color:i,pin_description:o,pin_id:l})=>{let n=d();n[0]&&n[0].path===e||(0,a.Nl)().setItem(r.N_,[{path:e,image:t,pin_description:o??"",dominant_color:i||"",pin_id:l||""}].concat(n))};function u(e,t,i,r,l,n){s({key:o.uc,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:r,pinDescription:l,pinInviteCode:n})}let _=(e,t,i,r,l)=>{s({key:o.hI,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:r,pinDescription:l??""})};function h(e,t,i,r,l){s({key:o.tH,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:r,pinDescription:l??""})}},947506:(e,t,i)=>{i.d(t,{Bb:()=>m,Bx:()=>a,F4:()=>n,Qj:()=>s,_6:()=>p,gv:()=>l,hg:()=>d,is:()=>_,jP:()=>h,lt:()=>r,oM:()=>c,wI:()=>u});var o=i(868808);let r=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),l=({firstName:e,i18n:t})=>e?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),n=e=>{let t=(0,o.mB)(e.search).board_url;if(t){let e=(0,o.Jx)(t),i=(0,o.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${i}`:`${e}?${i}`}return e.pathname},a=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),s=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return t},d=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),c=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),u=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return t},_=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),h=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),p=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),m=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},698767:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(730212),r=i(163059);function l(){let{countryFromIp:e}=(0,o.B)();return{isEUBasedIp:!!e&&!!r.a0?.dsa?.COUNTRY_CODES?.includes(e),isIndiaIp:!!e&&!!r.a0?.india?.COUNTRY_CODES?.includes(e)}}},34626:(e,t,i)=>{i.d(t,{Fj:()=>s,JI:()=>d,aG:()=>a});var o=i(667294),r=i(785893);let l=(0,o.createContext)(),n=(0,o.createContext)();function a({children:e}){let[t,i]=(0,o.useState)(!1);return(0,r.jsx)(l.Provider,{value:t,children:(0,r.jsx)(n.Provider,{value:i,children:e})})}function s(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useCountState must be used within a ShowBoardlessPinsContextProvider");return e}function d(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useCountUpdater must be used within a ShowBoardlessPinsContextProvider");return e}},203743:(e,t,i)=>{i.d(t,{JR:()=>s,PJ:()=>a,Zu:()=>n,c6:()=>l,mM:()=>r});var o=i(883119);let r=new o.Ry(1),l=new o.H3([r]),n=new o.H3([l]),a=new o.H3([n]),s=new o.H3([n])},799239:(e,t,i)=>{i.d(t,{F:()=>o,p:()=>r});let o=e=>({type:"PIN_BUILDER_LOADED_IMAGES",payload:e}),r=e=>({type:"UPDATE_PIN_BUILDER_INPUT",payload:e})},110684:(e,t,i)=>{i.d(t,{Z:()=>o});function o(e){let{users:t}=e;if(!t)return;let i=Object.keys(t).find(e=>void 0!==t[e].login_state);return i?t[i]:void 0}},166392:(e,t,i)=>{i.d(t,{Z:()=>l});var o=i(442279),r=i(110684);let l=(0,o.P1)(r.Z,e=>e.invites,(e,t)=>Object.keys(t).reduce((i,o)=>{let r=o.split(":"),l=r[0],n=r[1],a=e.id===n,s=t[o]&&["new","contact_request_not_approved"].includes(t[o].status);return a&&s&&(i[l]=o),i},{}))},707709:(e,t,i)=>{i.d(t,{Z:()=>_,o:()=>u});var o=i(667294),r=i(883119),l=i(488792),n=i(803611),a=i(679482),s=i(144326),d=i(383399),c=i(785893);let u="AddPinRep";function _({ctaText:e,handleClick:t,height:i,iconSize:u,textSize:_,component:h}){let p=(0,l.Z)(),m=(0,s.ZP)(),b=(0,d.Z)(),f=(0,n.Z)();return(0,o.useEffect)(()=>{p({event_type:120,component:h??0,element:10643})},[p,h]),(0,c.jsx)(r.xu,{children:(0,c.jsx)(r.Tg,{href:"/pin-builder/",onTap:()=>{if(f){f();return}b.isPartner&&p({event_type:101,component:0,element:10643}),t&&t()},children:(0,c.jsxs)(r.st,{children:[(0,c.jsx)(r.xu,{alignItems:"center",color:"secondary",display:"flex",fit:!0,height:i||a.yF,justifyContent:"center",rounding:2,width:i||void 0,children:(0,c.jsx)(r.xu,{color:"default",height:u||40,rounding:"circle",width:u||40,children:(0,c.jsx)(r.JO,{accessibilityLabel:"",color:"error",icon:"add-circle",inline:!0,size:u||40})})}),(0,c.jsx)(r.xu,{padding:2,children:(0,c.jsx)(r.xv,{color:"subtle",size:_||"300",weight:"bold",children:e||m._('Create Pin', 'label to open create pin modal', 'label to open create pin modal')})})]})})})}},593076:(e,t,i)=>{i.d(t,{Z:()=>P});var o=i(667294),r=i(883119),l=i(573706),n=i(144326),a=i(810867),s=i(785893);function d({anchor:e,hideAddSectionTooltip:t}){let i=(0,n.ZP)();return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.xu,{position:"absolute",top:!0,zIndex:a.bW,children:(0,s.jsx)(r.Li,{anchor:e,idealDirection:"down",message:i._('Tap + to add a section any time', 'boardActionsButton.addIconButton.addSectionFlyout', 'Flyout to point out where you can find add section'),onDismiss:t})})})}var c=i(453424),u=i(203743);function _({anchor:e,idealDirection:t,onAddOrEditDate:i,onAddSection:l,onClose:a,onCreateBoard:d,onCreatePin:_,onCreateStoryPin:h,surface:p,isWithinFixedContainer:m}){let b=(0,n.ZP)(),f=(0,c.Z)(!0),P=(0,o.useMemo)(()=>({pin:b._('Pin', 'BoardActionsButton.LegoFlyout.Pin', 'Option to create a pin'),rename:b._('Idea Pin', 'BoardActionsButton.LegoFlyout.IdeaPin', 'Option to create a Idea Pin'),board:b._('Board', 'profileHeader.actionBar.board', 'Option to create a board'),section:b._('Section', 'BoardActionsButton.LegoFlyout.Section', 'Option to create a board section'),date:b._('Date', 'BoardActionsButton.LegoFlyout.Date', 'Option to add a date to a board'),todos:b._('To-dos', 'BoardActionsButton.LegoFlyout.Note', 'Option to create a board note'),new:b._('New', 'BoardActionsButton.LegoFlyout.New', 'New option indicator')}),[b]);return(0,s.jsxs)(r.Lt,{anchor:e,id:"board_actions",idealDirection:t||"down",isWithinFixedContainer:m,onDismiss:a,zIndex:u.PJ,children:[(0,s.jsx)(r.Lt.Section,{label:b._('Create', 'BoardActionsButton.LegoFlyout.Create', 'Label for a list of options to create a pin or a section'),children:[!f&&(0,s.jsx)(r.Lt.Item,{dataTestId:"Create Pin",onSelect:()=>{_(),a()},option:{label:P.pin,value:P.pin}},"actions-create-0"),h&&(0,s.jsx)(r.Lt.Item,{dataTestId:"Create Story Pin",onSelect:()=>{h(),a()},option:{label:f?P.pin:P.rename,value:f?P.pin:P.rename}},"actions-create-1"),"profileBoards"===p&&d&&(0,s.jsx)(r.Lt.Item,{dataTestId:"Create board",onSelect:()=>{d(),a()},option:{label:P.board,value:P.board}},"actions-create-2")].filter(Boolean)}),"board"===p&&(0,s.jsx)(r.Lt.Section,{label:b._('Add', 'BoardActionsButton.LegoFlyout.Add', 'Label for a list of options to add board sections or a board date'),children:[l&&(0,s.jsx)(r.Lt.Item,{dataTestId:"addSection",onSelect:()=>{l(),a()},option:{label:P.section,value:P.section}},"actions-add-1"),!!i&&(0,s.jsx)(r.Lt.Item,{onSelect:()=>{i(),a()},option:{label:P.date,value:P.date}},"actions-add-2")].filter(Boolean)})]})}var h=i(989820),p=i(34626);function m({anchor:e}){let t=(0,p.JI)();return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.xu,{position:"absolute",top:!0,zIndex:a.bW,children:(0,s.jsx)(h.Qp,{anchor:e,experienceIds:[503447],flyoutSize:"md",idealDirection:"down",onClickComplete:()=>{t(!0)},placementId:19,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center",textWeight:"normal"})})})}function b({anchor:e}){return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.xu,{position:"absolute",top:!0,zIndex:a.bW,children:(0,s.jsx)(h.Qp,{anchor:e,experienceIds:[502096],idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0})})})}var f=i(502629);function P({children:e,idealDirection:t,onAddOrEditDate:i,onAddSection:a,onCreateBoard:c,onCreatePin:u,onCreateStoryPin:h,onOpen:p=()=>{},surface:P,isWithinFixedContainer:g}){let x;let A=(0,n.ZP)(),{showCreateSectionTooltip:y,setShowCreateSectionTooltip:v}=(0,f.L)()??{},{logContextEvent:w}=(0,l.v)(),C=()=>v(!1),j=(0,o.useRef)(),[L,z]=(0,o.useState)(!1),I=()=>{p(),y&&C(),z(!0),w({component:13056,element:1208,event_type:101,view_parameter:3106,view_type:4})},E=()=>z(!1),S=()=>{L?E():I()},B={board:A._('Board Actions', 'button that allows user view actions on a board such as add section, create pin, create pincode, and create widget', 'button that allows user view actions on a board such as add section, create pin, create pincode, and create widget'),profileBoards:A._('Profile Actions', 'profileHeader.actionBar.createButton', 'Button on user\'s profile to open flyout with options to create a pin or a board'),profilePins:A._('Profile Actions', 'profileHeader.actionBar.createButton', 'Button on user\'s profile to open flyout with options to create a pin or a board'),section:A._('Create Pin', 'Button to begin pin creation flow', 'Button to begin pin creation flow')},T=e&&e({active:L,openFlyout:S})||(0,s.jsx)(r.hU,{accessibilityLabel:B[P],icon:"add",iconColor:"gray",onClick:"section"===P?u:S,size:"lg"});return!L&&"board"===P&&(y?x="addSectionTooltip":i&&(x="planningActionsExperience")),L||"profileBoards"!==P||(x="createBoardTooltip"),(0,s.jsxs)(r.xu,{"data-test-id":"boardActionsButton",children:[(0,s.jsx)(r.xu,{ref:j,children:T}),L&&(0,s.jsx)(_,{anchor:j.current,idealDirection:t,isWithinFixedContainer:!!g,onAddOrEditDate:i,onAddSection:a,onClose:E,onCreateBoard:c,onCreatePin:u,onCreateStoryPin:h,surface:P}),"addSectionTooltip"===x&&(0,s.jsx)(d,{anchor:j.current,hideAddSectionTooltip:C}),"planningActionsExperience"===x&&(0,s.jsx)(b,{anchor:j.current}),"createBoardTooltip"===x&&(0,s.jsx)(m,{anchor:j.current})]})}},502629:(e,t,i)=>{i.d(t,{L:()=>a,M:()=>s});var o=i(667294),r=i(498490),l=i(785893);let{Provider:n,useMaybeHook:a}=(0,r.Z)("CreateSectionTooltip");function s({children:e}){let[t,i]=(0,o.useState)(!1),r=(0,o.useMemo)(()=>({showCreateSectionTooltip:t,setShowCreateSectionTooltip:i}),[t]);return(0,l.jsx)(n,{value:r,children:e})}},516228:(e,t,i)=>{i.d(t,{Z:()=>o});function o({boardDensity:e,component:t,viewType:i,viewParameter:o},r){let l=function({boardDensity:e,viewType:t}){switch(t){case 164:return"regular"===e?10618:10619;case 5:case 4:return"regular"===e?10607:10608;default:return 10607}}({boardDensity:e,viewType:i}),n=o??4===i?3106:3069;r({event_type:101,component:t,element:l,...i?{view_type:i,view_parameter:n}:Object.freeze({})})}},695356:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(252071);function r({density:e,surface:t}){o.Z.create("UserMetadataResource","board"===t?{profile_pin_rep_view_type:e}:{board_pin_rep_view_type:e}).callUpdate()}},810867:(e,t,i)=>{i.d(t,{Ev:()=>l,IK:()=>r,Jk:()=>s,Oj:()=>n,bW:()=>a});var o=i(883119);let r=1,l=1,n=2,a=new o.Ry(5e3),s=15}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93455-6850e918e4d3c67c.mjs.map